{"version":3,"file":"code-rain.vue.js","sources":["../../package/components/bg/code-rain.vue"],"sourcesContent":["<!-- 组件 -->\r\n<script setup lang=\"ts\">\r\nimport {onMounted, nextTick} from 'vue';\r\n\r\nconst props = defineProps({\r\n  text: {\r\n    type: String,\r\n    default: 'Hello Vue3!'\r\n  },\r\n  duration: {\r\n    type: Number,\r\n    default: 40\r\n  },\r\n  colors: {\r\n    type: Array<string>,\r\n    default: () => {\r\n      return ['#45b787'];\r\n    }\r\n  },\r\n  colWidth: {\r\n    type: Number,\r\n    default: 15\r\n  }\r\n});\r\n\r\nonMounted(() => {\r\n  nextTick(() => {\r\n\r\n    const bg = document.getElementById('bg') as HTMLCanvasElement;\r\n\r\n    const width = window.innerWidth - 3;\r\n    const height = window.innerHeight - 5;\r\n\r\n    bg.width = width;\r\n    bg.height = height;\r\n\r\n    const ctx = bg.getContext('2d');\r\n    ctx.fillStyle = 'rgba(1,1,1,0.9)';\r\n\r\n    const colCount = Math.floor(width / props.colWidth);\r\n    const colNextIndex = new Array(colCount);\r\n\r\n    colNextIndex.fill(1);\r\n    console.log(colNextIndex);\r\n\r\n    function draw() {\r\n      ctx.fillStyle = 'rgba(1,1,1,0.1)';\r\n      ctx.fillRect(0, 0, width, height);\r\n      const fz = 15;\r\n      ctx.fillStyle = getColor();\r\n      ctx.font = `${fz}px \"FangSong\"`;\r\n      for (let i = 0; i < colCount; i++) {\r\n        const x = i * props.colWidth;\r\n        const y = fz * colNextIndex[i];\r\n        ctx.fillText(getFont(), x, y);\r\n        if (y > height && Math.random() > 0.95) {\r\n          colNextIndex[i] = 0;\r\n        } else {\r\n          colNextIndex[i]++;\r\n        }\r\n      }\r\n    }\r\n\r\n    function getColor() {\r\n      return props.colors[Math.floor(Math.random() * props.colors.length)];\r\n    }\r\n\r\n    function getFont() {\r\n      return props.text[Math.floor(Math.random() * props.text.length)];\r\n    }\r\n\r\n    draw();\r\n    setInterval(draw, props.duration);\r\n\r\n  });\r\n});\r\n\r\n\r\n</script>\r\n\r\n<template>\r\n  <canvas id=\"bg\" style=\"width: 100%;height: 100%\"/>\r\n</template>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,UAAM,QAAQ;AAqBd,cAAU,MAAM;AACd,eAAS,MAAM;AAEP,cAAA,KAAK,SAAS,eAAe,IAAI;AAEjC,cAAA,QAAQ,OAAO,aAAa;AAC5B,cAAA,SAAS,OAAO,cAAc;AAEpC,WAAG,QAAQ;AACX,WAAG,SAAS;AAEN,cAAA,MAAM,GAAG,WAAW,IAAI;AAC9B,YAAI,YAAY;AAEhB,cAAM,WAAW,KAAK,MAAM,QAAQ,MAAM,QAAQ;AAC5C,cAAA,eAAe,IAAI,MAAM,QAAQ;AAEvC,qBAAa,KAAK,CAAC;AACnB,gBAAQ,IAAI,YAAY;AAExB,iBAAS,OAAO;AACd,cAAI,YAAY;AAChB,cAAI,SAAS,GAAG,GAAG,OAAO,MAAM;AAChC,gBAAM,KAAK;AACX,cAAI,YAAY;AACZ,cAAA,OAAO,GAAG,EAAE;AAChB,mBAAS,IAAI,GAAG,IAAI,UAAU,KAAK;AAC3B,kBAAA,IAAI,IAAI,MAAM;AACd,kBAAA,IAAI,KAAK,aAAa,CAAC;AAC7B,gBAAI,SAAS,QAAW,GAAA,GAAG,CAAC;AAC5B,gBAAI,IAAI,UAAU,KAAK,OAAA,IAAW,MAAM;AACtC,2BAAa,CAAC,IAAI;AAAA,YAAA,OACb;AACL,2BAAa,CAAC;AAAA,YAChB;AAAA,UACF;AAAA,QACF;AAEA,iBAAS,WAAW;AACX,iBAAA,MAAM,OAAO,KAAK,MAAM,KAAK,WAAW,MAAM,OAAO,MAAM,CAAC;AAAA,QACrE;AAEA,iBAAS,UAAU;AACV,iBAAA,MAAM,KAAK,KAAK,MAAM,KAAK,WAAW,MAAM,KAAK,MAAM,CAAC;AAAA,QACjE;AAEK;AACO,oBAAA,MAAM,MAAM,QAAQ;AAAA,MAAA,CAEjC;AAAA,IAAA,CACF;;;;;;"}